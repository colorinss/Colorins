---
import Layout from "../layouts/Layout.astro";
import { contentfulClient } from "../lib/contentful";
import type { Catalogue } from "../lib/contentful";
import slug from "slug";
import "@fontsource/abril-fatface";

const entries = await contentfulClient.getEntries<Catalogue>({
	content_type: "colorins",
});

const posts = entries.items.map((item) => {
	const { category, title, color, tallas, price, id, imagenes } = item.fields;
	return {
		category,
		title,
		color,
		tallas,
		price,
		id,
		imagenes,
		slug: slug(title),
	};
});
---
<section class="max-w-screen-xl mx-auto">
<p class="text-2xl mb-4 mx-2">Encuentra m√°s prendas</p>    
<div class="overflow-x-scroll span-x span-mandatory">
    <div class="w-[300vw] lg:w-[140vw]">
        <ul class="flex">
            {
                posts.slice(0, 10).map((post) => (
                    <li class="mx-2 snap-center w-[90vw]">
                        <a href={`/posts/${post.slug}/`}>
                            <img
                                class="rounded-md"
                                src={
                                    post.imagenes[0].fields.file.url
                                }
                                alt={post.title}
                            />
                            <div class="my-2 max-w-full">
                                <h2 class="font-normal">
                                    {post.title}
                                </h2>
                                <div class="text-gray-500">
                                    <div class="flex space-x-1">
                                        <p>$</p>
                                        <p class="">{post.price}</p>
                                        <p>mxn</p>
                                        <p>&rarr;</p>
                                    </div>
                                    <p class="capitalize text-xs">
                                        {post.category}
                                    </p>
                                </div>
                            </div>
                        </a>
                    </li>
                ))
            }
        </ul>
    </div>
</div>
</section>